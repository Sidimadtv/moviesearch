function scrollToTop(){const e=document.documentElement.scrollTop||document.body.scrollTop;e>0&&(window.requestAnimationFrame(scrollToTop),window.scrollTo(0,e-e/8))}const searchInput=document.getElementById("search-input"),searchButton=document.getElementById("search-button"),resultsContainer=document.getElementById("results"),corsProxy="https://corsproxy.io/?";function optimisedImageUrl(e){return e.replace("._V1_.","._V1_QL75_UX160_.")}function fetchAndShow(){const e=encodeURIComponent(searchInput.value),t=`${corsProxy}https://v3.sg.media-imdb.com/suggestion/x/${e}.json`;Pace.restart(),fetch(t).then((e=>e.json())).then((e=>{const t=e.d;resultsContainer.innerHTML="",t.forEach((e=>{if(e.i&&("movie"===e.qid||"tvSeries"===e.qid)){const t=document.createElement("div");t.classList.add("result"),t.setAttribute("IMDB",e.id);let i="";"movie"===e.qid&&e.i?i=`<a onClick="setUrl(this); return setVideo(this);" url="imdb=${e.id}&type=movie&title=${e.l.replace(/ /g,"_")}" isWebSeries="false" title="${e.l}"  class="links" IMDB="${e.id}" href="https://www.2embed.cc/embed/${e.id}" target="_blank">\n                     <img alt="${e.l}" src="${optimisedImageUrl(e.i.imageUrl)}">\n                      <div class="info">\n                       <h3>${e.l}</h3>\n                        <p>${e.s}</p>\n                      </div>\n                   </a>`:"tvSeries"===e.qid&&e.i&&(i=`<a onClick="setUrl(this); return setVideo(this);" url="imdb=${e.id}&season=1&episode=1&title=${e.l.replace(/ /g,"_")}" IMDB="${e.id}" title="${e.l}" isWebSeries="true" class="links" href="https://www.2embed.cc/embedtv/${e.id}&s=1&e=1" target="_blank">\n                      <img alt="${e.l}" src="${optimisedImageUrl(e.i.imageUrl)}">\n                        <div class="info">\n                          <h3>${e.l}</h3>\n                          <p>${e.s}</p>\n                        </div>\n                    </a>`),t.innerHTML=i,resultsContainer.appendChild(t)}}))}))}function setAll(e,t,i,s,n){if(e&&t&&!i&&!s&&n){let i=document.createElement("a");i.setAttribute("onClick","setUrl(this); return setVideo(this);"),i.setAttribute("url",`imdb=${e}&type=movie&title=${t.replace(/ /g,"_")}`),i.setAttribute("isWebSeries","false"),i.setAttribute("title",t),i.setAttribute("class","links"),i.setAttribute("IMDB",e),i.setAttribute("href","https://www.2embed.cc/embed/"+e),i.setAttribute("target","_blank"),i.click()}else if(e&&t&&s&&!n){let n=document.createElement("a");n.setAttribute("onClick","setUrl(this); return setVideo(this);"),n.setAttribute("url",`imdb=${e}&season=${i}&episode=${s}`),n.setAttribute("isWebSeries","true"),n.setAttribute("title",t),n.setAttribute("class","links"),n.setAttribute("IMDB",e),n.setAttribute("href",`https://www.2embed.cc/embedtv/${e}&s=${i}&e=${s}`),n.setAttribute("target","_blank"),n.click()}}const fetchTitle=async e=>{const t=`${corsProxy}https://v3.sg.media-imdb.com/suggestion/x/${e}.json`;try{const e=await fetch(t),i=await e.json();return i.d[0].l}catch(e){}};function setUrl(e){let t=e.getAttribute("url");window.history.replaceState({},"",`?${t.replace(/%20/g,"+")}`)}function fillSearchInput(){let e=new URLSearchParams(window.location.search),t=e.get("search"),i=e.get("season"),s=e.get("episode"),n=e.get("imdb"),o=e.get("type");if(!t||i||s||n)!n||!o||t||s||i?n&&!t&&s&&i&&fetchTitle(n).then((e=>setAll(n,e,i,s,o))).catch((e=>{})):fetchTitle(n).then((e=>setAll(n,e,i,s,o))).catch((e=>{}));else{t=t.replace(/\+/g,"%20");document.querySelector("#search-input").value=t,fetchAndShow()}}function updateURL(e){let t=e.value;t?window.history.replaceState({},"",`?search=${encodeURIComponent(t).replace(/%20/g,"+")}`):window.history.replaceState({},"",window.location.pathname)}function highlightCards(){let e=new URLSearchParams(window.location.search).get("imdb");try{document.querySelectorAll(".result").forEach((function(e){e.className="result"})),document.querySelector(`div[IMDB=${e}]`).className="result hoverClass"}catch(e){}}let timer;function episodeHighlight(e="s1e1"){document.querySelectorAll(".episodes").forEach((function(e){e.className="episodes"})),document.querySelector(`.episodes[cssidentification='${e}']`).className="episodes selected"}function setVideo(e){const t=document.getElementById("iframe"),i=document.getElementById("video");t.src=e.getAttribute("href"),i.style.display="block";const s=document.getElementById("webSeriesData"),n="b6b677eb7d4ec17f700e3d4dfc31d005",o=e.getAttribute("IMDB");if(Pace.restart(),scrollToTop(),window.dispatchEvent(new PopStateEvent("popstate")),"false"==e.getAttribute("isWebSeries")&&"links"==e.className&&(s.innerHTML=""),""!==e.getAttribute("title")&&(document.title=e.getAttribute("title")),e.className.includes("episode")&&episodeHighlight(e.getAttribute("cssidentification")),"true"==e.getAttribute("isWebSeries")){s.innerHTML="",async function(){const e=await fetch(`https://api.themoviedb.org/3/find/${o}?api_key=${n}&language=en-US&external_source=imdb_id`),t=(await e.json()).tv_results[0].id,i=await fetch(`https://api.themoviedb.org/3/tv/${t}?api_key=${n}&language=en-US`),a=await i.json(),c=a.number_of_seasons;s.innerHTML+="<h2>Seasons:</h2>";for(let e=1;e<=c;e++){s.innerHTML+=`<h3>Season ${e}:</h3><br>`;let i=document.createElement("div");i.classList.add("episode-container");let c="";const r=await fetch(`https://api.themoviedb.org/3/tv/${t}/season/${e}?api_key=${n}&language=en-US`),l=await r.json();for(const i of l.episodes){const s=i.episode_number;let n=s.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});c+=`<a class="episodes" title="${a.name+": E"+n+". "+i.name}" cssidentification="s${e}e${s}" url="imdb=${o}&season=${e}&episode=${s}&title=${a.name.replace(/ /g,"_")+"_E"+n+"_"+i.name.replace(/ /g,"_")}" onClick="event.preventDefault();setVideo(this);setUrl(this); " href="https://www.2embed.cc/embedtv/${t}&s=${e}&e=${s}">E${n}. ${i.name}</a>`}i.innerHTML=c,s.appendChild(i),episodeHighlight()}let r=new URLSearchParams(window.location.search),l=r.get("season"),d=r.get("episode");l&&d?document.querySelector(`a[cssIdentification="s${l}e${d}"]`).click():l&&!d?document.querySelector(`a[cssIdentification="s${l}e1"]`).click():document.querySelector('a[cssIdentification="s1e1"]').click()}()}function a(){dataLayer.push(arguments)}return window.dataLayer=window.dataLayer||[],a("js",new Date),a("config","G-THTQ9GZQ0J"),highlightCards(),!1}fillSearchInput(),window.onpopstate=function(){let e=new URLSearchParams(window.location.search),t=e.get("search"),i=e.get("imdb");if(t||i){let e=document.getElementsByClassName("information");for(let t=0;t<e.length;t++)e[t].style.display="none"}else{let e=document.getElementsByClassName("information");for(let t=0;t<e.length;t++)e[t].style.display="block"}},searchInput.addEventListener("keyup",(function(){let e=this;clearTimeout(timer),timer=setTimeout((function(){updateURL(e),fetchAndShow(),window.dispatchEvent(new PopStateEvent("popstate")),$("html,body").animate({scrollTop:$("#results").offset().top},"slow")}),500)})),searchButton.addEventListener("click",(function(){fetchAndShow(),window.dispatchEvent(new PopStateEvent("popstate"))}));